<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="icon" type="image/png" href="https://i.postimg.cc/mrC5wQ8t/Whats-App-Image-2025-08-02-at-12-57-33.jpg" />
    <meta charset="UTF-8">
    <title>Liseuse photo - Les Blockhaus Lyssois</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
            background-image: url("arriereplan.jpg");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        /* Fix mobile */
        @media (max-width: 768px) {
            body {
                background-attachment: scroll;
            }
        }

        .page {
            background-color: rgba(255, 255, 255, 0.93);
            min-height: 100vh;
        }

        header {
            text-align: center;
            background-color: #e0e0e0;
            padding: 25px 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        header h1 {
            margin: 0;
            font-size: 32px;
        }

        header p {
            margin-top: 8px;
            font-style: italic;
            font-size: 18px;
        }

        .liseuse {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px 20px;
        }

        .titre-photo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.45s ease-out, transform 0.45s ease-out;
            will-change: opacity, transform;
        }

        .photo-container {
            max-width: 90%;
            max-height: 70vh;
            overflow: hidden;
            border-radius: 18px;
            box-shadow: 6px 6px 20px rgba(0,0,0,0.35);
            transform: translateZ(0); /* boost GPU */
        }

        .photo-container img {
            width: 100%;
            height: auto;
            display: block;
            opacity: 0;
            transform: scale(1.04);
            transition: opacity 0.45s ease-out, transform 0.45s ease-out;
            will-change: opacity, transform;
        }

        .controls {
            margin-top: 25px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .bouton {
            background: linear-gradient(145deg, #f4f4f4, #d8d8d8);
            border: 2px solid #333;
            padding: 12px 26px;
            font-size: 18px;
            border-radius: 14px;
            cursor: pointer;
            box-shadow: 4px 4px 12px rgba(0,0,0,0.25);
            transition: transform 0.25s ease, box-shadow 0.25s ease;
        }

        .bouton:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 8px 8px 20px rgba(0,0,0,0.35);
        }

        @media screen and (max-width: 768px) {
            .titre-photo {
                font-size: 20px;
            }

            header h1 {
                font-size: 24px;
            }

            header p {
                font-size: 16px;
            }
        }
    </style>
</head>

<body>
<div class="page">

    <header>
        <h1>Liseuse photo</h1>
        <p>Les blockhaus dans leurs états actuel</p>
    </header>

    <div class="liseuse">

        <div class="titre-photo" id="titre"></div>

        <div class="photo-container">
            <img id="photo" src="" alt="Photo du blockhaus">
        </div>

        <div class="controls">
            <button class="bouton" onclick="precedent()">← Précédent</button>
            <button class="bouton" onclick="suivant()">Suivant →</button>
            <a href="https://lesblockhauslyssois-lbl.github.io/virtual-museum/" class="bouton">Retour</a>
        </div>

    </div>

</div>

<script>
    const galerie = [
        { src: "Photos/BEF322.jpg", titre: "Un blockhaus pour canon de la BEF" },
        { src: "Photos/Anstaing.jpg", titre: "L'un des créneaux du bloc d'Anstaing" },
        { src: "Photos/casmemate.jpg", titre: "Une casemate d'artillerie de la BEF" },
        { src: "Photos/1420.jpg", titre: "Un pillbox dans la plaine de Beaulieu à Wattrelos" },
        { src: "Photos/cambuis.jpg", titre: "Le poste de tir du Cambuis à Hem" },
        { src: "Photos/pdt.jpg", titre: "Poste de tir d'un blockhaus français" },
        { src: "Photos/betty.jpg", titre: "Un pillbox au risquons-tout (Tourcoing)" }
    ];

    /* Préchargement des images */
    galerie.forEach(item => {
        const imgPreload = new Image();
        imgPreload.src = item.src;
    });

    let index = 0;
    const img = document.getElementById("photo");
    const titre = document.getElementById("titre");

    function afficher() {
        img.style.opacity = 0;
        img.style.transform = "scale(1.04)";
        titre.style.opacity = 0;
        titre.style.transform = "translateY(10px)";

        const nouvelleImage = galerie[index].src;
        const nouveauTitre = galerie[index].titre;

        img.onload = () => {
            titre.textContent = nouveauTitre;

            requestAnimationFrame(() => {
                img.style.opacity = 1;
                img.style.transform = "scale(1)";
                titre.style.opacity = 1;
                titre.style.transform = "translateY(0)";
            });
        };

        img.src = nouvelleImage;
    }

    function suivant() {
        index = (index + 1) % galerie.length;
        afficher();
    }

    function precedent() {
        index = (index - 1 + galerie.length) % galerie.length;
        afficher();
    }

    document.addEventListener("keydown", e => {
        if (e.key === "ArrowRight") suivant();
        if (e.key === "ArrowLeft") precedent();
        if (e.key === "Escape") window.location.href = "index.html";
    });

    /* Swipe mobile */
    let startX = 0;

    img.addEventListener("touchstart", e => {
        startX = e.touches[0].clientX;
    });

    img.addEventListener("touchend", e => {
        let endX = e.changedTouches[0].clientX;
        if (endX < startX - 50) suivant();
        if (endX > startX + 50) precedent();
    });

    /* Affichage initial */
    afficher();
</script>

</body>
</html>
